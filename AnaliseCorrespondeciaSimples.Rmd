---
title: "Análise de Correspondências Simples"
output: html_notebook
---

Análise de Correpondência é uma técnica não supervisionada que busca diagnosticar relação entre variáveis qualitativas, usando para tal tabelas de contigência com as frequencias das associações.
Na simples temos apenas duas variáveis e chamamos de ANACOR.QUando há mais que 2 chamamos de análise de corrrespondencia multipla.

Dados do exemplo:
```{R}
data = read.csv("data/perfil_investidor.csv")
```

As duas variáveis serão perfil e aplicação.

Tabela de frequência observadas:
```{R}
tab = table(data$perfil,data$aplicacao)
print(tab)
```

Teste qui-quadradro: associação entre as variáveis se dão de forma aleatória?

```{r message=FALSE, warning=FALSE}

teste_qui_quadrado <- chisq.test(tab)
qui2
```

Adicionado os totais das linahs e colunas:
```{R}
tabela = tab
tabela = cbind(tabela, Total = rowSums(tabela))
tabela = rbind(tabela, Total = colSums(tabela))
print(tabela)
```

Tabela de frequências esperadas (probabilidades):

```{R}
tabela_freq_esperadas = data.frame(matrix(, nrow=3, ncol=3))
for (row in 1:3){
  for(col in 1:3){
    tabela_freq_esperadas[row,col] = ( tabela[row,4]*tabela[4,col] )/ tabela[4,4]
  }
}
colnames(tabela_freq_esperadas) = colnames(tab)
rownames(tabela_freq_esperadas) = rownames(tab)
tabela_freq_esperadas
```
O teste qui-quadrado também nos da esse resultado:

```{r}
teste_qui_quadrado$expected
```

Matriz de resíduo (diferença do observado com o esperado, assim a soma dos resíduos sempre será zero):

```{r}
residuos =  tab-tabela_freq_esperadas
print(residuos)
```

resíduos padrozinados ajustados

Mapa perceptual é uma espécia de plot da tabela de contigência

```{r}

```
